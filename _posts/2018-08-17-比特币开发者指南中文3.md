---
layout:     post
title:      比特币开发者指南(3)--操作模式
subtitle:   
date:       2018-08-17
author:     Jang
header-img: img/post-bg-debug.png
catalog: true
tags:
    - BlockChain
---

## 操作模式
目前客户端验证块链主要有两种方式：全节点和SPV客户端。

## 全节点

第一个也是最安全的模式是Bitcoin Core, 也被称为全链客户端。该安全模型通过从创世块开始下载并验证块一直到最近发现的块来保证块链的有效性。这被称为使用特定块的高度来验证客户端对网络的视图。

去欺骗一个客户端，对手需要提供一个比当前真实的链更难的完整的替代性的区块链历史记录，这在计算上是昂贵的，因为最具累积工作量的链被定义为是真实的链。由于在链的尖端生成新的块所需的计算难度，欺骗一个完整节点想获得确认非常困难。这种形式的验证对于sybil攻击是高度抵制的-只需要一个诚实的网络节点，以便接收和验证真实块链的完整状态。
<img src="https://img-blog.csdn.net/20170706221410794?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZ2FtbWFn/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"/>

## 简化支付验证(SPV)

在原始比特币白皮书里面详述的另外一种方式是在初始同步过程中只下载块头，当需要时再从完整节点获取交易信息。与块链的高度线性匹配，每个块头只有80字节，或每年就4.2MB，而不管块的总大小。

如白皮书所述，块头中的merkle根以及merkle分支可以向SPV客户端验证嵌入在区块链中的一个区块的问题交易。这并不能保证所迁入的交易的有效性。相反，它展示了执行重复花费攻击所需的工作量。

块链中的块深度对应于在特定块上构建的累积难度。SPV客户端知道merkle根和关联的交易信息，并从完整节点请求相应的merkle分支。一旦检索到merkle分支，证明块中的交易的存在，则SPV客户端可以查看块深度作为交易有效性和安全性的代理。插入无效交易的恶意节点对用户的攻击成本与构建在该块之上的累积难度增长，因为恶意节点需要单独将是挖掘这个伪造的链。

## TBD
