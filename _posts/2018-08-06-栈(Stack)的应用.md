---
layout:     post
title:      Java数据结构与算法(五)
subtitle:   栈(Stack)的应用
date:       2018-08-06
author:     Jang
header-img: img/post-bg-debug.png
catalog: true
tags:
    - Algorithm
---

## 5.4 栈的应用<br>
栈是一种很重要的数据结构，在计算机中有着很广泛的应用，如下一些操作都应用到了栈:
  * 符号匹配
  * 中缀表达式转换为后缀表达式
  * 计算后缀表达式
  * 实现函数的嵌套调用
  * HTML和XML文件中的标签匹配
  * 网页浏览器中已经访问页面的历史记录

### 5.4.1 符号匹配分析<br>
在编写程序的过程中，我们经常会遇到诸如圆括号"()"与花括号"{}",这些符号都必须是左右匹配的，这就是我们所说的符号匹配类型，当然符合不仅需要个数相等，而且需要左先后右的依次出现，否则就不符合匹配规则，如")("，明显是错误的匹配，而"()"才是正确的匹配。有时候符号如括号还会嵌套出现，如"9-(5+(5+1))"，而嵌套的匹配原则是一个右括号与其前面最近的一个括号匹配，事实上编译器帮我们检查语法错误也是执行一样的匹配原理，而这一系列操作都需要借助栈来完成，接下来我们使用栈来实现括号"()"是否匹配的检测。
判断原则如下:str="((5-3) * 8 - 2 )":
  * a. 设置str是一个表达式字符串，从左到右依次对字符串str中的每个字符char进行语法检测，如果char是左括号则入栈，如果char是右括号则出栈(有一对匹配就可以去匹配一个左括号，因此可以出栈)，如此时出栈的字符char为左括号，则说明这一对括号匹配正常，如果此时栈为空或者出栈字符不为左括号，则表示缺少与char匹配的左括号，即目标不完整
  * b. 重复执行a操作，直到str检测结束，如果此时栈为空，则全部括号匹配，如果栈中还有左括号，说明缺少右括号.

用栈作为存储容器实现如下：
```
public class CheckExpression {
  public staic String isValid(String expstr) {
    //创建栈
    LinkedStack<String> stack = new LinkedStack<>();
    
    int i=0;
    while(i<expstr.length()){
      char ch = expstr.chartAt(i);
      i++;
      switch(ch)
      {
        case '(': 
          stack.push(ch+"");//左括号直接入栈
          break;
        case ')':
          if(stack.isEmpty()||!stack.pop().equals("("))//遇到右括号，左括号直接出栈
            return "(";
      }
    }
    
    //最后检查是否为空，为空则通过检测
    if(stack.isEmpty()){
      return "Pass";
    }else{
      return "Fail"
    }
  }
  
  public static void main(String args[]){
    String expstr = "((5-3)*8-2)";
    System.out.println(expstr+" "+isValid(expstr));
  }
}
```

### 5.4.2 中缀表达式转换为后缀表达式<br>
我们先来了解一下什么是中缀表达式，评测所见到的计算表达式都算是中缀表达式:
```
//1+3*(9-2)+9 ---->中缀表达式
```
了解中缀表达式后来看看其定义：将运算符写在两个操作数中间的表达式成为中缀表达式。在中缀表达式中，运算符拥有不同的优先级，同时也可以使用圆括号改变运算次序，由于这两点的存在，使中缀表达式的运算规则比较复杂，求值的过程不能从左往右依次计算，当然这也是相对计算机而言罢了。既然计算机感觉复杂，那么我们就需要把中缀表达式转化成计算机容易计算而且不复杂的表达式，这就是后缀表达式了，在后缀表达式中，运算符是没有优先级的，整个计算都是遵守从左往右的次序依次计算的：
```
//1+3*(9-2)+9       转化前的中缀表达式
//1 3 9 2 - * + 9 + 转化后的后缀表达式
```
中缀转后缀的转换过程需要用到栈，这里我们假设栈A用于协助转换，并使用数组B用于存放转化后的后缀表达式，具体过程如下:
    * 1). 如果需要操作数，我们就直接将其放如数组B中。
    * 2). 如果遇到运算符，则我们将其放入到栈A中，遇到左括号时我们也将其放入栈A中。
    * 3). 如果遇到一个右括号，则将栈元素弹出，将弹出的运算符输入并存入数组B中，直到遇到左括号为止。注意，左括号只弹出不存入数组。
    * 4). 如果遇到任何其他的操作符，如"+"," * ","("等，从栈中弹出元素存入数组B直到遇到发现更低优先级的元素(或者栈为空)为止。弹出完这些元素后，才将遇到的操作符压入栈中。有一点需要注意，只有在遇到")"的情况下我们才弹出"(",其他情况我们都不会弹出"("。
    * 5). 如果我们读到了输入的末尾，则将栈中所有元素依次弹出存入到数组B中。
    * 6). 到此，中缀表达式转化为后缀表达式完成，数组存储的元素顺序就代表转化后的后缀表达式。
